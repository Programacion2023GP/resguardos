<div
  [ngClass]="{ 'bg-neutral-700': timeDay, 'bg-white': !timeDay }"
  class="flex flex-col w-screen h-full overflow-x-hidden"
>
  <!--
  NAVBAR SUPERION
-->

<div class="flex w-full shadow-md z-40">
  <div class="w-full lg:w-screen h-fit">
    <nav class="relative flex items-center  w-full overflow-auto p-4 bg-opacity-95">
      <ul class="flex flex-row items-center w-full space-x-4 md:space-x-8 leading-10">
        <!-- Logo -->
        <li>
          <img class="w-10 h-10" src="../../../assets/icon.png" alt="Logo" />
        </li>
        
        <!-- Button -->
        <li>
          <button class="p-2 rounded-full bg-purple-200 transition hover:bg-purple-300" (click)="toggleContent()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="30"
              height="30"
              fill="currentColor"
              viewBox="0 0 16 16"
              class="p-1 text-purple-800"
            >
              <path
                fill-rule="evenodd"
                d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"
              />
            </svg>
          </button>
        </li>

        <!-- Navigation Links Aligned to the Right -->
        <div class="flex-grow"></div> <!-- Fills space to push elements to the right -->

        <ng-container *ngIf="roleTypeUser < 3">
          <li
            class="cursor-pointer transition duration-200 hover:text-purple-800 border-b-2 border-transparent"
            [ngClass]="{ 'border-purple-500 text-purple-800': selectedUser[0] }"
            (click)="changeUserSelected(0)"
          >
            Todos
          </li>
        </ng-container>

        <ng-container *ngIf="roleTypeUser < 2">
          <li
            class="cursor-pointer transition duration-200 hover:text-purple-800 border-b-2 border-transparent"
            [ngClass]="{ 'border-purple-500 text-purple-800': selectedUser[1] }"
            (click)="changeUserSelected(1)"
          >
            Administradores
          </li>
        </ng-container>

        <ng-container *ngIf="roleTypeUser < 3">
          <li
            class="cursor-pointer transition duration-200 hover:text-purple-800 border-b-2 border-transparent"
            [ngClass]="{ 'border-purple-500 text-purple-800': selectedUser[2] }"
            (click)="changeUserSelected(2)"
          >
            Enlaces
          </li>
        </ng-container>

        <ng-container *ngIf="roleTypeUser < 3">
          <li
            class="cursor-pointer transition duration-200 hover:text-purple-800 border-b-2 border-transparent"
            [ngClass]="{ 'border-purple-500 text-purple-800': selectedUser[3] }"
            (click)="changeUserSelected(3)"
          >
            Empleados
          </li>
        </ng-container>

        <!-- Right aligned button -->
        <li (click)="changeTimeday()">
          <button class="text-2xl transition duration-200">
            <i
              class="fas"
              [ngClass]="{
                'fa-sun text-yellow-400': timeDay,
                'fa-moon text-gray-600': !timeDay
              }"
            ></i>
          </button>
        </li>
      </ul>
    </nav>
  </div>
</div>

  <!--
    NAVBAR SUPERION
  -->

  <div class="flex flex-row w-screen h-full">
    <!--
      SIDEBAR
    -->
    <!-- 
    <nav
      class="h-full  relative shadow-xl z-40 w-max-fit transition ease-in-out duration-100"
      [ngClass]="{
        ' md:w-3/12 h-20': isExpanded,
        'w-6': !isExpanded,
        'bg-neutral-700': timeDay,
        'bg-white': !timeDay
      }"
    >
      <ng-container *ngIf="isExpanded">
        <ul class="flex   h-full flex-col py-4 space-y-1 pl-3 pr-4">
          <ng-container *ngIf="roleTypeUser < 4">
            <li
              (click)="changeItemSelected(1)"
              [ngClass]="{
                'bg-purple-200 rounded-lg text-gray-800': selectedItemMenu[1]
              }"
            >
              <a
                [routerLink]="['/Usuarios']"
                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
              >
                <span class="inline-flex justify-center items-center ml-4">
                  <i class="fas fa-users"></i>
                </span>
                <span class="ml-2 text-sm tracking-wide truncate"
                  >Usuarios</span
                >
              </a>
            </li>
          </ng-container>
          <ng-container *ngIf="roleTypeUser < 4">
            <li
              (click)="changeItemSelected(2)"
              [ngClass]="{
                'bg-purple-200 rounded-lg text-gray-800': selectedItemMenu[2]
              }"
            >
              <a
                [routerLink]="['/Resguardos']"
                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
              >
                <span class="inline-flex justify-center items-center ml-4">
                  <i class="fas fa-lock"></i>
                </span>
                <span class="ml-2 text-sm tracking-wide truncate"
                  >Resguardos</span
                >
              </a>
            </li>
         
          </ng-container>
          <ng-container *ngIf="roleTypeUser < 3">
            <li
              (click)="changeItemSelected(3)"
              [ngClass]="{
                'bg-purple-200 rounded-lg text-gray-800': selectedItemMenu[3]
              }"
            >
              <a
                [routerLink]="['/TiposResguardos']"
                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
              >
                <span class="inline-flex justify-center items-center ml-4">
                  <i class="fas fa-shield"></i>
                </span>
                <span class="ml-2 text-sm tracking-wide truncate"
                  >Catalogo Tipos/Resguardos</span
                >
              </a>
            </li>
            <li
              (click)="changeItemSelected(4)"
              [ngClass]="{
                'bg-purple-200 rounded-lg text-gray-800': selectedItemMenu[4]
              }"
            >
              <a
                [routerLink]="['/Estados']"
                class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
              >
                <span class="inline-flex justify-center items-center ml-4">
                  <i class="fas fa-shield"></i>
                </span>
                <span class="ml-2 text-sm tracking-wide truncate"
                  >Catalogo Estados/Resguardos</span
                >
              </a>
            </li>
            <li
            (click)="changeItemSelected(5)"
            [ngClass]="{
              'bg-purple-500 rounded-lg text-gray-800': selectedItemMenu[5]
            }"
          >
            <a
              [routerLink]="['/Graficas']"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
            >
              <span class="inline-flex justify-center items-center ml-4">
<i class="fas fa-chart-bar"></i>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate"
                >Graficas</span
              >
            </a>


            
          </li>
          <li
          (click)="changeItemSelected(6)"
          [ngClass]="{
            'bg-purple-500 rounded-lg text-gray-800': selectedItemMenu[5]
          }"
        >
      


        </li>
            <li
            (click)="changeItemSelected(7)"
            [ngClass]="{
              'bg-purple-200 rounded-lg text-gray-800': selectedItemMenu[6]
            }"
          >
            <a
              [routerLink]="['/Plantilla']"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <i class="fas fa-camera"></i>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate"
                >Plantilla de oficios</span
              >
            </a>
          </li>
          </ng-container>
          <li>

          <a
          [routerLink]="['/Korima']"
          class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
        >
          <span class="inline-flex justify-center items-center ml-4">
<i class="fas fa-chart-bar"></i>
          </span>
          <span class="ml-2 text-sm tracking-wide truncate"
            >Korima resguardos</span
          >
        </a>
      </li>
      <li>

        <a
        [routerLink]="['/Archivos']"
        class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
      >
        <span class="inline-flex justify-center items-center ml-4">
<i class="fas fa-chart-bar"></i>
        </span>
        <span class="ml-2 text-sm tracking-wide truncate"
          >Oficios Korima</span
        >
      </a>
    </li>
    <li>

      <a
      [routerLink]="['/Archivos']"
      class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
    >
      <span class="inline-flex justify-center items-center ml-4">
<i class="fas fa-chart-bar"></i>
      </span>
      <span class="ml-2 text-sm tracking-wide truncate"
        >Autorizar bajas Korima</span
      >
    </a>
  </li>
      <li>

        <a
        [routerLink]="['/ResguardosUsuarios', nomina]"
        class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
      >
        <span class="inline-flex justify-center items-center ml-4">
<i class="fas fa-chart-bar"></i>
        </span>
        <span class="ml-2 text-sm tracking-wide truncate"
          >resguardos control</span
        >
      </a>
    </li>
          <li>

            <a
              href="#"
              (click)="Logout()"
              class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-purple-50 hover:rounded-lg text-gray-600 hover:text-gray-800 border-l-4 border-transparent"
            >
              <span class="inline-flex justify-center items-center ml-4">
                <i class="fas fa-sign-out-alt"></i>
              </span>
              <span class="ml-2 text-sm tracking-wide truncate"
                >Cerrar Sesión</span
              >
            </a>
          </li>
        </ul>
      </ng-container>
    </nav> -->

    <nav
      class="relative h-screen shadow-2xl z-40 w-max-fit transition duration-150 ease-in-out"
      [ngClass]="{
        'md:w-2/12 h-20': isExpanded,
        'w-6': !isExpanded,
        'bg-neutral-700 text-white': timeDay,
        'bg-white text-gray-700': !timeDay
      }"
    >
      <ng-container *ngIf="isExpanded">
        <ul class="flex flex-col h-full py-6 px-4 space-y-2">
          <ng-container *ngIf="roleTypeUser < 4">
            <li
              (click)="changeItemSelected(1)"
              [ngClass]="{
                'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                  selectedItemMenu[1],
                'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[1]
              }"
            >
              <a
                [routerLink]="['/Usuarios']"
                class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
              >
                <span
                  class="inline-flex items-center justify-center text-lg ml-2"
                >
                  <i class="fas fa-users"></i>
                </span>
                <span class="ml-3 text-sm font-medium truncate">Usuarios</span>
              </a>
            </li>
          </ng-container>

          <ng-container *ngIf="roleTypeUser < 4">
            <li
              (click)="changeItemSelected(2)"
              [ngClass]="{
                'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                  selectedItemMenu[2],
                'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[2]
              }"
            >
              <a
                [routerLink]="['/Resguardos']"
                class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
              >
                <span
                  class="inline-flex items-center justify-center text-lg ml-2"
                >
                <i class="fas fa-folder-open"></i>
              </span>
                <span class="ml-3 text-sm text-wrap font-medium whitespace-normal"
                  > Registro de resguardos de control</span
                >
              </a>
            </li>
           
          </ng-container>
          
          <ng-container *ngIf="roleTypeUser < 3">
            <li
              (click)="changeItemSelected(3)"
              [ngClass]="{
                'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                  selectedItemMenu[3],
                'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[3]
              }"
            >
              <a
                [routerLink]="['/TiposResguardos']"
                class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
              >
                <span
                  class="inline-flex items-center justify-center text-lg ml-2"
                >
                  <i class="fas fa-shield-alt"></i>
                </span>
                <span class="ml-3 text-sm font-medium truncate"
                  >Tipos de Resguardos</span
                >
              </a>
            </li>
            <li
            (click)="changeItemSelected(4)"
            [ngClass]="{
              'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                selectedItemMenu[4],
              'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[3]
            }"
          >
            <a
              [routerLink]="['/Reportedepartamentos']"
              class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
            >
              <span
                class="inline-flex items-center justify-center text-lg ml-2"
              >
              <i class="fas fa-file-alt"></i>  
            </span>
              <span class="ml-3 text-sm font-medium truncate"
                >Reporte de  departamentos </span
              >
            </a>
          </li>
      
            <li
              (click)="changeItemSelected(6)"
              [ngClass]="{
                'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                  selectedItemMenu[6],
                'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[4]
              }"
            >
              <a
                [routerLink]="['/Estados']"
                class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
              >
                <span
                  class="inline-flex items-center justify-center text-lg ml-2"
                >
                  <i class="fas fa-map-marker-alt"></i>
                </span>
                <span class="ml-3 text-sm font-medium truncate"
                  >Estados/Resguardos</span
                >
              </a>
            </li>

            <li
              (click)="changeItemSelected(7)"
              [ngClass]="{
                'bg-purple-100 rounded-md text-purple-900 shadow-lg':
                  selectedItemMenu[7],
                'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[5]
              }"
            >
              <a
                [routerLink]="['/Graficas']"
                class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
              >
                <span
                  class="inline-flex items-center justify-center text-lg ml-2"
                >
                  <i class="fas fa-chart-bar"></i>
                </span>
                <span class="ml-3 text-sm font-medium truncate">Gráficas</span>
              </a>
            </li>
          </ng-container>

  
          <ng-container *ngIf="roleTypeUser > 3">

          <li
          (click)="changeItemSelected(8)"
          [ngClass]="{
            'bg-purple-100 rounded-md text-purple-900 shadow-lg':
              selectedItemMenu[8],
            'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[6]
          }"
          >
            <a
              [routerLink]="['/ResguardosUsuarios', nomina]"
              class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none hover:bg-purple-50 hover:text-purple-800"
            >
              <span
                class="inline-flex items-center justify-center text-lg ml-2"
              >
                <i class="fas fa-user-shield"></i>
              </span>
              <span class="ml-3 text-sm font-medium truncate"
                >Resguardos Control</span
              >
            </a>
          </li>
      
          </ng-container>
          <ng-container *ngIf="roleTypeUser < 3">

          <li
          (click)="changeItemSelected(9)"
          [ngClass]="{
            'bg-purple-100 rounded-md text-purple-900 shadow-lg':
              selectedItemMenu[9],
            'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[3]
          }"
        >
          <a
            [routerLink]="['/ReporteKorima']"
            class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none border-l-4 border-transparent"
          >
            <span
              class="inline-flex items-center justify-center text-lg ml-2"
            >
            <i class="fas fa-file-alt"></i>  
          </span>
            <span class="ml-3 text-sm font-medium truncate"
              >Reporte de imagenes korima</span
            >
          </a>
        </li>
      </ng-container>
      <ng-container *ngIf="roleTypeUser < 4">

      <li
      (click)="changeItemSelected(11)"
      [ngClass]="{
        'bg-purple-100 rounded-md text-purple-900 shadow-lg':
          selectedItemMenu[11],
        'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[6]
      }"
      >
        
        <a
          [routerLink]="['/Archivos']"
          class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none hover:bg-purple-50 hover:text-purple-800"
        >
          <span
            class="inline-flex items-center justify-center text-lg ml-2"
          >
         <i *ngIf="roleTypeUser==3" class="fas fa-check-circle"></i> <i *ngIf="roleTypeUser!=3" class="fas fa-folder"></i>
          </span>
          <span class="ml-3 text-sm font-medium truncate"
            >{{roleTypeUser==3?'Autorizar Bajas Korima':'Oficios Korima'}}</span
          >
        </a>
      </li>
    </ng-container>

          <li
          (click)="changeItemSelected(10)"
          [ngClass]="{
            'bg-purple-100 rounded-md text-purple-900 shadow-lg':
              selectedItemMenu[10],
            'hover:bg-purple-50 hover:text-purple-800': !selectedItemMenu[6]
          }"
          >
            <a
              [routerLink]="['/Korima', payroll]"
              class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none hover:bg-purple-50 hover:text-purple-800"
            >
              <span
                class="inline-flex items-center justify-center text-lg ml-2"
              >
                <i class="fas fa-user-shield"></i>
              </span>
              <span class="ml-3 text-sm font-medium truncate"
                >Resguardos Korima</span
              >
            </a>
          </li>
          <li>
            <a
              href="#"
              (click)="Logout()"
              class="relative flex items-center h-12 pl-3 pr-4 rounded-md transition-colors duration-200 ease-in-out focus:outline-none hover:bg-red-100 hover:text-red-800"
            >
              <span
                class="inline-flex items-center justify-center text-lg ml-2"
              >
                <i class="fas fa-sign-out-alt"></i>
              </span>
              <span class="ml-3 text-sm font-medium truncate"
                >Cerrar Sesión</span
              >
            </a>
          </li>
        </ul>
      </ng-container>
    </nav>

    <!--
      OUTLET
    -->

    <div
      class="transition-colors duration-100 pb-10 max-sm:overflow-y-auto max-md:overflow-y-hidden"
      [ngClass]="{
        'md:w-10/12 h-20': isExpanded,
        'md:w-full': !isExpanded,
        'bg-neutral-700 border-none': timeDay,
        'bg-white': !timeDay
      }"
    >
    <div class="flex flex-row pb-40 mb-40 w-full h-full ">
      <!-- Primera columna -->
      <div 
      [ngClass]="{
        'max-w-[calc(100%-280px)]': isExpanded && roleTypeUser<4,
        'w-5/6':roleTypeUser<4,
        'w-full':roleTypeUser>4,

     
      }"

      >
        <!-- Ajuste del ancho máximo -->
        <div class="w-full  h-full">
          <router-outlet></router-outlet>
        </div>
      </div>

        <!-- Segunda columna (Cards) -->
        <ng-container *ngIf="roleTypeUser < 4">

        <div
          class=" hidden sm:block lg:w-1/6 shadow-lg ml-2 overflow-auto h-screen flex-items "
        >
          <div
            [@repeatfadeInOutAnimation]="animationState"
            [ngClass]="{ 'border-r': !timeDay }"
            class="h-full overflow-hidden lg:block p-5"
          >
            <ng-container *ngIf="roleTypeUser < 4">
              <!-- Título -->
              <div class="text-xs text-gray-400 tracking-wider">USUARIOS</div>

              <!-- Barra de búsqueda -->
              <div class="relative mt-2">
                <input
                  (input)="searchUser($event)"
                  type="text"
                  [ngClass]="{ 'bg-white': !timeDay, 'bg-gray-200': timeDay }"
                  class="pl-8 h-9 border border-gray-300 dark:border-gray-700 w-full rounded-md text-sm"
                  placeholder="N° Nomina | Nombre"
                />
                <svg
                  viewBox="0 0 24 24"
                  class="w-4 absolute text-gray-400 top-1/2 transform -translate-y-1/2 left-2"
                  stroke="currentColor"
                  stroke-width="2"
                  fill="none"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              </div>
            </ng-container>

            <!-- Contenedor de Cards -->
            <div
              class="pb-10 mt-3 custom-scrollbar max-w-full max-h-full overflow-y-auto"
            >
              <div class="mb-4" *ngFor="let user of users; let index = index">
                <button
                  [pTooltip]="'Agregar resguardos a ' + user.name"
                  [routerLink]="['/ResguardosUsuarios', user.id]"
                  [ngClass]="{
                    'bg-white shadow-md hover:shadow-lg transition-shadow duration-300':
                      !timeDay,
                    'bg-neutral-300': timeDay,
                    'border-2': true,
                    'border-blue-700': index === selected
                  }"
                  class="mb-4 p-4 w-full flex flex-col rounded-lg overflow-auto dark:bg-gray-800"
                  (click)="selectedEmployed(index)"
                >
                  <!-- Perfil y nombre -->
                  <div
                    class="flex items-center pb-2 mb-2 border-b border-gray-200 dark:border-gray-700 w-full"
                  >
                    <li
                      class="fas fa-user text-blue-500 w-7 h-7 mr-3 rounded-full bg-gray-100 p-2"
                      alt="profile"
                    ></li>
                    <p
                      class="text-sm font-semibold text-gray-800 dark:text-gray-200"
                    >
                      {{ user.name }}
                    </p>
                  </div>

                  <!-- Rol y nómina -->
                  <div class="flex items-center w-full space-x-2 mt-2">
                    <span
                      class="text-xs font-medium py-1 px-2 rounded-md"
                      [ngClass]="{
                        'bg-blue-100 text-blue-500': user.role === 2,
                        'bg-cyan-100 text-cyan-500': user.role === 3,
                        'bg-teal-100 text-teal-500': user.role === 4
                      }"
                    >
                      {{ user.type_role }}
                    </span>
                    <span class="ml-auto text-xs font-bold text-gray-600">{{
                      user.payroll
                    }}</span>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
